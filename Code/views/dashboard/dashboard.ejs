<!-- 
let costs = {
    data: [
        ['Task', 'Hours per Day'],
        ['Work', 11],
        ['Eat', 2],
        ['Commute', 2],
        ['Watch TV', 2],
        ['Sleep', 7]
    ],
    title: 'Costs'

}

let revenue = {
    data: [
        ['Task', 'Hours per Day'],
        ['Work', 11],
        ['Eat', 2],
        ['Commute', 2],
        ['Watch TV', 2],
        ['Sleep', 7]
    ],
    title: 'Revenue'
} -->
<!DOCTYPE html>
<html lang="en">
<%-include('../Components/templateHead', {
        pageName:'Login', 
        cssFile: [
            '/css/Artigos/artigos.css',
        ]
    }) %>

<body>

    <script src="/scripts/Dashboard/dashboard.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {
            'packages': ['corechart']
        });

        function drawChart(entryData, title) {
            var data = google.visualization.arrayToDataTable(entryData);
            var options = {
                title: title,
                backgroundColor: 'black'              
            };
            var chart1 = new google.visualization.PieChart(document.getElementsByClassName('piechart')[(title === 'Revenue')?0:1]);
            chart1.draw(data, options);
        }

        window.addEventListener("load", function(event) {
            let url = `<%=url%>dashboard/data`;
            fetch(url, {
                method: 'post',
                headers: {
                    Accept: 'application/json',
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    Teste: "Valor teste"
                })
            }).then((response) => {
                response.json().then((resp) => {
                    let { costs ,revenue } = resp; 
                    let pieCostsData = {
                        data:[['Task', 'Hours per Day']],
                        title: 'Costs'
                    }
                    let pieRevenueData = {
                        data:[['Task', 'Hours per Day']],
                        title: 'Revenue'
                    }
                    if(typeof(resp.revenue) !== 'undefined'){
                        let chartRevenueInput = completeObj(revenue, pieRevenueData, '2020-06');
                        let chartCostsInput = completeObj(costs, pieCostsData, '2020-06') 
                        drawChart(chartRevenueInput.data, chartRevenueInput.title)
                        drawChart(chartCostsInput.data, chartCostsInput.title)
                    }
                })
            })
        });






    </script>

    <%-include('../Components/Header/headerComponent',{
            navigator:{
                label: ["Início", "Sobre Nós", "Artigos"],
                routes:[`/inicio`,`/sobrenos`,`/artigos`]
            },
            loginSigin:{
                label: ["Alexandre", "Logout"],
                routes: [``,`/usuarios/logout`]
            }
    
    }) %>

    <body>
        <div style="position: relative;height: 100vh;">
            <%- include('../Components/SideMenu/sideMenu', sideElement )%>
            <div style="display: flex;border: 2px solid red; justify-content:flex-end; background-color: antiquewhite;">
                <div class="piechart" style="width: 900px; height: 500px; border: 2px solid blue"></div>
                <div class="piechart" style="width: 900px; height: 500px;"></div>
            </div>
        </div>
    </body>

    <%-include('../Components/footer') %>
</body>
</html>