<!DOCTYPE html>
<html lang="en">
<%-include('../Components/templateHead', {
        pageName:'Login', 
        cssFile: [
            '/css/Artigos/artigos.css',
        ]
    }) %>

<body>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {
            'packages': ['corechart']
        });

        function drawChart(entryData, title) {
            var data = google.visualization.arrayToDataTable(entryData);
            var options = {
                title: title                
            };
            var chart1 = new google.visualization.PieChart(document.getElementsByClassName('piechart')[(title === 'Revenue')?0:1]);
            chart1.draw(data, options);
        }

        window.addEventListener("load", function(event) {
            const url = `<%=url%>dashboard/data`;
            fetch(url, {
                method: 'post',
                headers: {
                    Accept: 'application/json',
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    Teste: "Valor teste"
                })
            }).then((response) => {
                response.json().then((resp) => {
                    if(typeof(resp.revenue.data) !== 'undefined'){
                        drawChart(resp.revenue.data, resp.revenue.title)
                        drawChart(resp.costs.data, resp.costs.title)
                    }
                })
            })
        });



    </script>

    <%-include('../Components/Header/headerComponent',{
            navigator:{
                label: ["Início", "Sobre Nós", "Artigos"],
                routes:[`/inicio`,`/sobrenos`,`/artigos`]
            },
            loginSigin:{
                label: ["Alexandre", "Logout"],
                routes: [``,`/usuarios/logout`]
            }
    
    }) %>

    <body>
        <div style="position: relative;height: 100vh;">
            <%- include('../Components/SideMenu/sideMenu', sideElement )%>
            <div style="display: flex;border: 2px solid red; justify-content:flex-end">
                <div class="piechart" style="width: 900px; height: 500px;"></div>
                <div class="piechart" style="width: 900px; height: 500px;"></div>
            </div>
        </div>
    </body>

    <%-include('../Components/footer') %>
</body>

</html>